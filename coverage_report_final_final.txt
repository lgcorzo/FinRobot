============================= test session starts ==============================
platform linux -- Python 3.12.4, pytest-8.4.2, pluggy-1.6.0
rootdir: /mnt/F024B17C24B145FE/Repos/FinRobot
configfile: pyproject.toml
testpaths: tests
plugins: anyio-4.12.1, typeguard-4.4.4, asyncio-0.25.3, cov-5.0.0, mock-3.15.1, xdist-3.8.0
asyncio: mode=Mode.AUTO, asyncio_default_fixture_loop_scope=None
collected 214 items

tests/application/integration/test_workflow.py ..                        [  0%]
tests/application/jobs/test_analysis.py .                                [  1%]
tests/application/jobs/test_base_job.py .......                          [  4%]
tests/application/reporting/services/test_pdf_service.py .               [  5%]
tests/application/reporting/test_entities.py ...                         [  6%]
tests/data_access/data_source/domains/filings/test_fmp_adapter.py ..     [  7%]
tests/data_access/data_source/domains/filings/test_sec_adapter.py ....   [  9%]
tests/data_access/data_source/domains/market_data/test_market_finnhub_adapter.py . [  9%]
..                                                                       [ 10%]
tests/data_access/data_source/domains/market_data/test_market_yfinance_adapter.py . [ 11%]
........                                                                 [ 14%]
tests/data_access/data_source/domains/news/test_news_finnhub_adapter.py . [ 15%]
                                                                         [ 15%]
tests/data_access/data_source/domains/social/test_reddit_adapter.py .    [ 15%]
tests/data_access/data_source/earnings_calls_src/test_main_earningsData.py . [ 16%]
..                                                                       [ 17%]
tests/data_access/data_source/filings_src/prepline_sec_filings/test_fetch.py . [ 17%]
.......                                                                  [ 21%]
tests/data_access/data_source/filings_src/prepline_sec_filings/test_sec_document.py . [ 21%]
..........                                                               [ 26%]
tests/data_access/data_source/filings_src/test_secData.py ..             [ 27%]
tests/data_access/data_source/filings_src/test_sec_filings.py .......... [ 31%]
...                                                                      [ 33%]
tests/data_access/data_source/marker_sec_src/test_pdf_to_md_parallel.py . [ 33%]
...                                                                      [ 35%]
tests/data_access/data_source/marker_sec_src/test_sec_filings_to_pdf.py . [ 35%]
..                                                                       [ 36%]
tests/data_access/test_finance_data.py ...                               [ 37%]
tests/data_access/test_finnhub_utils.py ....                             [ 39%]
tests/data_access/test_finnlp_utils.py .........                         [ 43%]
tests/data_access/test_fmp_utils.py .......                              [ 47%]
tests/data_access/test_reddit_utils.py .                                 [ 47%]
tests/data_access/test_sec_utils.py ..............                       [ 54%]
tests/data_access/test_yfinance_utils.py ....                            [ 56%]
tests/evaluation/test_analyzer_service.py ...                            [ 57%]
tests/functional/test_analyzer.py .........                              [ 61%]
tests/functional/test_charting.py ...                                    [ 63%]
tests/functional/test_coding.py ......                                   [ 65%]
tests/functional/test_quantitative.py ....                               [ 67%]
tests/functional/test_rag.py ..                                          [ 68%]
tests/functional/test_ragquery.py ...                                    [ 70%]
tests/functional/test_reportlab.py ..                                    [ 71%]
tests/functional/test_text.py .                                          [ 71%]
tests/infrastructure/core/test_general_utils.py ....                     [ 73%]
tests/infrastructure/core/test_schemas.py ...                            [ 74%]
tests/infrastructure/core/test_scripts.py ..                             [ 75%]
tests/infrastructure/core/test_settings.py ..                            [ 76%]
tests/infrastructure/io/test_configs.py .....                            [ 78%]
tests/infrastructure/io/test_files.py ....                               [ 80%]
tests/infrastructure/io/test_osvariables.py ....                         [ 82%]
tests/infrastructure/services/test_alert_service.py ......               [ 85%]
tests/infrastructure/services/test_logger_service.py .....               [ 87%]
tests/infrastructure/services/test_mlflow_service.py .....               [ 90%]
tests/infrastructure/tools/test_tools.py ...                             [ 91%]
tests/models/agents/test_agent_workflow.py ...                           [ 92%]
tests/models/agents/test_library.py ..                                   [ 93%]
tests/models/agents/test_prompts.py ..                                   [ 94%]
tests/models/agents/test_registry.py ......                              [ 97%]
tests/models/agents/test_single_assistant.py ...                         [ 99%]
tests/models/agents/test_utils.py ..                                     [100%]

=============================== warnings summary ===============================
src/finrobot/settings.py:18
  /mnt/F024B17C24B145FE/Repos/FinRobot/src/finrobot/settings.py:18: PydanticDeprecatedSince20: Support for class-based `config` is deprecated, use ConfigDict instead. Deprecated in Pydantic V2.0 to be removed in V3.0. See Pydantic V2 Migration Guide at https://errors.pydantic.dev/2.12/migration/
    class FinRobotSettings(Settings):

tests/application/integration/test_workflow.py::test_single_assistant_chat
  /mnt/F024B17C24B145FE/Repos/FinRobot/src/finrobot/models/agents/workflow.py:140: DeprecationWarning: There is no current event loop
    loop = asyncio.get_event_loop()

tests/infrastructure/services/test_alert_service.py::TestAlertsService::test_notify_sends_notification
  /mnt/F024B17C24B145FE/Repos/FinRobot/.venv/lib/python3.12/site-packages/plyer/platforms/linux/notification.py:103: UserWarning: The Python dbus package is not installed.
  Try installing it with your distribution's package manager, it is usually called python-dbus or python3-dbus, but you might have to try dbus-python instead, e.g. when using pip.
    warnings.warn(msg)

-- Docs: https://docs.pytest.org/en/stable/how-to/capture-warnings.html

---------- coverage: platform linux, python 3.12.4-final-0 -----------
Name                                                                                    Stmts   Miss  Cover   Missing
---------------------------------------------------------------------------------------------------------------------
src/finrobot/__init__.py                                                                    0      0   100%
src/finrobot/__main__.py                                                                    3      3     0%   1-4
src/finrobot/application/__init__.py                                                        2      0   100%
src/finrobot/application/jobs/__init__.py                                                   4      0   100%
src/finrobot/application/jobs/analysis.py                                                  18      0   100%
src/finrobot/application/jobs/base.py                                                      31      0   100%
src/finrobot/application/reporting/__init__.py                                              2      0   100%
src/finrobot/application/reporting/entities.py                                             23      0   100%
src/finrobot/application/reporting/services/__init__.py                                     1      0   100%
src/finrobot/application/reporting/services/pdf_service.py                                101      2    98%   392-393
src/finrobot/application/reporting/templates/__init__.py                                    0      0   100%
src/finrobot/core/schemas.py                                                               27      0   100%
src/finrobot/data_access/data_source/__init__.py                                           11      0   100%
src/finrobot/data_access/data_source/domains/__init__.py                                    5      0   100%
src/finrobot/data_access/data_source/domains/filings/__init__.py                            5      0   100%
src/finrobot/data_access/data_source/domains/filings/entities.py                           11      0   100%
src/finrobot/data_access/data_source/domains/filings/fmp_adapter.py                        33      3    91%   16-17, 55
src/finrobot/data_access/data_source/domains/filings/repositories.py                        7      1    86%   19
src/finrobot/data_access/data_source/domains/filings/sec_adapter.py                        93     20    78%   23-24, 56, 82-85, 107, 118-121, 140, 148, 165, 172-175, 178-180
src/finrobot/data_access/data_source/domains/market_data/__init__.py                        5      0   100%
src/finrobot/data_access/data_source/domains/market_data/entities.py                       29      1    97%   20
src/finrobot/data_access/data_source/domains/market_data/finnhub_adapter.py                56      8    86%   20-21, 38, 62, 66, 71, 89, 98
src/finrobot/data_access/data_source/domains/market_data/repositories.py                   18      5    72%   19, 24, 29, 34, 39
src/finrobot/data_access/data_source/domains/market_data/yfinance_adapter.py               62      1    98%   115
src/finrobot/data_access/data_source/domains/news/__init__.py                               4      0   100%
src/finrobot/data_access/data_source/domains/news/entities.py                              12      0   100%
src/finrobot/data_access/data_source/domains/news/finnhub_adapter.py                       32      4    88%   20-21, 44, 54
src/finrobot/data_access/data_source/domains/news/repositories.py                           6      1    83%   20
src/finrobot/data_access/data_source/domains/social/__init__.py                             4      0   100%
src/finrobot/data_access/data_source/domains/social/entities.py                            14      0   100%
src/finrobot/data_access/data_source/domains/social/reddit_adapter.py                      41      7    83%   19-20, 97-104
src/finrobot/data_access/data_source/domains/social/repositories.py                         6      1    83%   20
src/finrobot/data_access/data_source/earnings_calls_src/__init__.py                         1      0   100%
src/finrobot/data_access/data_source/earnings_calls_src/earningsData.py                    22     12    45%   20-23, 35-38, 50-59
src/finrobot/data_access/data_source/earnings_calls_src/main_earningsData.py               64     10    84%   64-66, 73-75, 79-80, 87-88
src/finrobot/data_access/data_source/filings_src/__init__.py                                1      0   100%
src/finrobot/data_access/data_source/filings_src/prepline_sec_filings/__init__.py           0      0   100%
src/finrobot/data_access/data_source/filings_src/prepline_sec_filings/fetch.py            111     17    85%   12, 105-109, 167, 181-184, 203-206, 243, 245
src/finrobot/data_access/data_source/filings_src/prepline_sec_filings/sec_document.py     203     67    67%   7, 93, 101, 118, 136, 143, 149-162, 172, 179, 191, 200, 211, 217, 220-224, 240, 242-247, 250-251, 258-267, 277-283, 292, 301, 334-338, 346-347, 352-356, 362, 368-372, 378, 387-392
src/finrobot/data_access/data_source/filings_src/prepline_sec_filings/sections.py          61      9    85%   56, 135-143
src/finrobot/data_access/data_source/filings_src/secData.py                                65      1    98%   60
src/finrobot/data_access/data_source/filings_src/sec_filings.py                           105     15    86%   36, 42-43, 48-49, 68, 135-142, 173-179
src/finrobot/data_access/data_source/finance_data.py                                       27      2    93%   56-57
src/finrobot/data_access/data_source/finnhub_utils.py                                      73     13    82%   20-21, 39, 71, 82, 110, 114, 119, 142, 151, 157-162
src/finrobot/data_access/data_source/finnlp_utils.py                                       53      1    98%   296
src/finrobot/data_access/data_source/fmp_utils.py                                         121      9    93%   59-61, 97, 118, 131, 147, 292-295
src/finrobot/data_access/data_source/marker_sec_src/__init__.py                             3      0   100%
src/finrobot/data_access/data_source/marker_sec_src/pdf_to_md.py                           16     10    38%   15-26
src/finrobot/data_access/data_source/marker_sec_src/pdf_to_md_parallel.py                  85     25    71%   28, 33, 43, 49-55, 61-64, 120-122, 128, 130, 133-134, 142-150
src/finrobot/data_access/data_source/marker_sec_src/sec_filings_to_pdf.py                  76      6    92%   81, 95-99
src/finrobot/data_access/data_source/reddit_utils.py                                       41      7    83%   17-18, 93-100
src/finrobot/data_access/data_source/sec_utils.py                                          93      1    99%   102
src/finrobot/data_access/data_source/yfinance_utils.py                                     62     22    65%   48-61, 68-73, 83-85, 89-91, 98, 111
src/finrobot/functional/__init__.py                                                         7      0   100%
src/finrobot/functional/analyzer.py                                                       114      0   100%
src/finrobot/functional/charting.py                                                        95      6    94%   71, 138, 205-208
src/finrobot/functional/coding.py                                                          43      0   100%
src/finrobot/functional/quantitative.py                                                    87     11    87%   138-144, 151-157
src/finrobot/functional/rag.py                                                             26      2    92%   16, 52
src/finrobot/functional/ragquery.py                                                        86      3    97%   70, 90, 154
src/finrobot/functional/reportlab.py                                                      101      0   100%
src/finrobot/functional/text.py                                                             9      0   100%
src/finrobot/infrastructure/__init__.py                                                     3      0   100%
src/finrobot/infrastructure/io/__init__.py                                                  3      0   100%
src/finrobot/infrastructure/io/configs.py                                                  11      0   100%
src/finrobot/infrastructure/io/files.py                                                    22      1    95%   45
src/finrobot/infrastructure/io/osvariables.py                                              18      0   100%
src/finrobot/infrastructure/services/__init__.py                                            4      0   100%
src/finrobot/infrastructure/services/alert_service.py                                      16      0   100%
src/finrobot/infrastructure/services/logger_service.py                                     55      1    98%   24
src/finrobot/infrastructure/services/mlflow_service.py                                     44      1    98%   77
src/finrobot/infrastructure/utils/__init__.py                                              20      2    90%   31, 35
src/finrobot/models/agents/__init__.py                                                      0      0   100%
src/finrobot/models/agents/agent_library.py                                                 5      0   100%
src/finrobot/models/agents/prompts.py                                                       4      0   100%
src/finrobot/models/agents/tools/__init__.py                                                2      0   100%
src/finrobot/models/agents/tools/registry.py                                               32      5    84%   12-16, 32
src/finrobot/models/agents/utils.py                                                        20     12    40%   13-17, 27-34
src/finrobot/models/agents/workflow.py                                                     85     18    79%   73-82, 92-93, 104, 120, 124, 141-143, 148, 164, 168, 181
src/finrobot/scripts.py                                                                    13      0   100%
src/finrobot/settings.py                                                                   20      0   100%
src/finrobot/tools/__init__.py                                                             32      2    94%   33, 49
---------------------------------------------------------------------------------------------------------------------
TOTAL                                                                                    2926    348    88%

======================= 214 passed, 3 warnings in 23.77s =======================
